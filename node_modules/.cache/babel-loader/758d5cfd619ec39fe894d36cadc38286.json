{"ast":null,"code":"export function configureFakeBackend() {\n  let users = [{\n    id: 1,\n    username: 'test',\n    password: 'test',\n    firstName: 'Tesst',\n    lastName: 'Usser'\n  }];\n  let realFetch = window.fetch;\n\n  window.fetch = function (url, opts) {\n    return new Promise((resolve, reject) => {\n      // wrap in timeout to simulate server api call\n      setTimeout(() => {\n        // authenticate\n        if (url.endsWith('/users/authenticate') && opts.method === 'POST') {\n          // get parameters from post request\n          let params = JSON.parse(opts.body); // find if any user matches login credentials\n\n          let filteredUsers = users.filter(user => {\n            return user.username === params.username && user.password === params.password;\n          });\n\n          if (filteredUsers.length) {\n            // if login details are valid return user details\n            let user = filteredUsers[0];\n            let responseJson = {\n              id: user.id,\n              username: user.username,\n              firstName: user.firstName,\n              lastName: user.lastName\n            };\n            resolve({\n              ok: true,\n              text: () => Promise.resolve(JSON.stringify(responseJson))\n            });\n          } else {\n            // else return error\n            reject('Username or password is incorrect');\n          }\n\n          return;\n        } // get users\n\n\n        if (url.endsWith('/users') && opts.method === 'GET') {\n          // check for fake auth token in header and return users if valid, this security \n          // is implemented server side in a real application\n          if (opts.headers && opts.headers.Authorization === `Basic ${window.btoa('test:test')}`) {\n            resolve({\n              ok: true,\n              text: () => Promise.resolve(JSON.stringify(users))\n            });\n          } else {\n            // return 401 not authorised if token is null or invalid\n            resolve({\n              status: 401,\n              text: () => Promise.resolve()\n            });\n          }\n\n          return;\n        } // pass through any requests not handled above\n\n\n        realFetch(url, opts).then(response => resolve(response));\n      }, 500);\n    });\n  };\n}","map":{"version":3,"sources":["/home/rajguru/Desktop/MyWorkspace/git_amplify/React_MareialUI_Dashboard/src/Pages/Login/_helpers/fake-backend.js"],"names":["configureFakeBackend","users","id","username","password","firstName","lastName","realFetch","window","fetch","url","opts","Promise","resolve","reject","setTimeout","endsWith","method","params","JSON","parse","body","filteredUsers","filter","user","length","responseJson","ok","text","stringify","headers","Authorization","btoa","status","then","response"],"mappings":"AAAA,OAAO,SAASA,oBAAT,GAAgC;AACnC,MAAIC,KAAK,GAAG,CAAC;AAAEC,IAAAA,EAAE,EAAE,CAAN;AAASC,IAAAA,QAAQ,EAAE,MAAnB;AAA2BC,IAAAA,QAAQ,EAAE,MAArC;AAA6CC,IAAAA,SAAS,EAAE,OAAxD;AAAiEC,IAAAA,QAAQ,EAAE;AAA3E,GAAD,CAAZ;AACA,MAAIC,SAAS,GAAGC,MAAM,CAACC,KAAvB;;AACAD,EAAAA,MAAM,CAACC,KAAP,GAAe,UAAUC,GAAV,EAAeC,IAAf,EAAqB;AAChC,WAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpC;AACAC,MAAAA,UAAU,CAAC,MAAM;AAEb;AACA,YAAIL,GAAG,CAACM,QAAJ,CAAa,qBAAb,KAAuCL,IAAI,CAACM,MAAL,KAAgB,MAA3D,EAAmE;AAC/D;AACA,cAAIC,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWT,IAAI,CAACU,IAAhB,CAAb,CAF+D,CAI/D;;AACA,cAAIC,aAAa,GAAGrB,KAAK,CAACsB,MAAN,CAAaC,IAAI,IAAI;AACrC,mBAAOA,IAAI,CAACrB,QAAL,KAAkBe,MAAM,CAACf,QAAzB,IAAqCqB,IAAI,CAACpB,QAAL,KAAkBc,MAAM,CAACd,QAArE;AACH,WAFmB,CAApB;;AAIA,cAAIkB,aAAa,CAACG,MAAlB,EAA0B;AACtB;AACA,gBAAID,IAAI,GAAGF,aAAa,CAAC,CAAD,CAAxB;AACA,gBAAII,YAAY,GAAG;AACfxB,cAAAA,EAAE,EAAEsB,IAAI,CAACtB,EADM;AAEfC,cAAAA,QAAQ,EAAEqB,IAAI,CAACrB,QAFA;AAGfE,cAAAA,SAAS,EAAEmB,IAAI,CAACnB,SAHD;AAIfC,cAAAA,QAAQ,EAAEkB,IAAI,CAAClB;AAJA,aAAnB;AAMAO,YAAAA,OAAO,CAAC;AAAEc,cAAAA,EAAE,EAAE,IAAN;AAAYC,cAAAA,IAAI,EAAE,MAAMhB,OAAO,CAACC,OAAR,CAAgBM,IAAI,CAACU,SAAL,CAAeH,YAAf,CAAhB;AAAxB,aAAD,CAAP;AACH,WAVD,MAUO;AACH;AACAZ,YAAAA,MAAM,CAAC,mCAAD,CAAN;AACH;;AAED;AACH,SA5BY,CA8Bb;;;AACA,YAAIJ,GAAG,CAACM,QAAJ,CAAa,QAAb,KAA0BL,IAAI,CAACM,MAAL,KAAgB,KAA9C,EAAqD;AACjD;AACA;AACA,cAAIN,IAAI,CAACmB,OAAL,IAAgBnB,IAAI,CAACmB,OAAL,CAAaC,aAAb,KAAgC,SAAQvB,MAAM,CAACwB,IAAP,CAAY,WAAZ,CAAyB,EAArF,EAAwF;AACpFnB,YAAAA,OAAO,CAAC;AAAEc,cAAAA,EAAE,EAAE,IAAN;AAAYC,cAAAA,IAAI,EAAE,MAAMhB,OAAO,CAACC,OAAR,CAAgBM,IAAI,CAACU,SAAL,CAAe5B,KAAf,CAAhB;AAAxB,aAAD,CAAP;AACH,WAFD,MAEO;AACH;AACAY,YAAAA,OAAO,CAAC;AAAEoB,cAAAA,MAAM,EAAE,GAAV;AAAeL,cAAAA,IAAI,EAAE,MAAMhB,OAAO,CAACC,OAAR;AAA3B,aAAD,CAAP;AACH;;AAED;AACH,SA1CY,CA4Cb;;;AACAN,QAAAA,SAAS,CAACG,GAAD,EAAMC,IAAN,CAAT,CAAqBuB,IAArB,CAA0BC,QAAQ,IAAItB,OAAO,CAACsB,QAAD,CAA7C;AAEH,OA/CS,EA+CP,GA/CO,CAAV;AAgDH,KAlDM,CAAP;AAmDH,GApDD;AAqDH","sourcesContent":["export function configureFakeBackend() {\n    let users = [{ id: 1, username: 'test', password: 'test', firstName: 'Tesst', lastName: 'Usser' }];\n    let realFetch = window.fetch;\n    window.fetch = function (url, opts) {\n        return new Promise((resolve, reject) => {\n            // wrap in timeout to simulate server api call\n            setTimeout(() => {\n\n                // authenticate\n                if (url.endsWith('/users/authenticate') && opts.method === 'POST') {\n                    // get parameters from post request\n                    let params = JSON.parse(opts.body);\n\n                    // find if any user matches login credentials\n                    let filteredUsers = users.filter(user => {\n                        return user.username === params.username && user.password === params.password;\n                    });\n\n                    if (filteredUsers.length) {\n                        // if login details are valid return user details\n                        let user = filteredUsers[0];\n                        let responseJson = {\n                            id: user.id,\n                            username: user.username,\n                            firstName: user.firstName,\n                            lastName: user.lastName\n                        };\n                        resolve({ ok: true, text: () => Promise.resolve(JSON.stringify(responseJson)) });\n                    } else {\n                        // else return error\n                        reject('Username or password is incorrect');\n                    }\n\n                    return;\n                }\n\n                // get users\n                if (url.endsWith('/users') && opts.method === 'GET') {\n                    // check for fake auth token in header and return users if valid, this security \n                    // is implemented server side in a real application\n                    if (opts.headers && opts.headers.Authorization === `Basic ${window.btoa('test:test')}`) {\n                        resolve({ ok: true, text: () => Promise.resolve(JSON.stringify(users)) });\n                    } else {\n                        // return 401 not authorised if token is null or invalid\n                        resolve({ status: 401, text: () => Promise.resolve() });\n                    }\n\n                    return;\n                }\n\n                // pass through any requests not handled above\n                realFetch(url, opts).then(response => resolve(response));\n\n            }, 500);\n        });\n    }\n}"]},"metadata":{},"sourceType":"module"}